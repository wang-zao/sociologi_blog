(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1457:function(t,e,n){var content=n(1659);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("42efb304",content,!0,{sourceMap:!1})},1658:function(t,e,n){"use strict";var o=n(1457);n.n(o).a},1659:function(t,e,n){(e=n(27)(!1)).push([t.i,".stats-body[data-v-0a988a38]{padding:10px;min-height:80vh}.stats-panel[data-v-0a988a38]{background:#fff;border-radius:5px;margin:15px;color:#777;padding:20px 20px 5px}.left-stats[data-v-0a988a38],.right-stats[data-v-0a988a38]{height:100px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:15px}.left-stats h3[data-v-0a988a38]{margin:0;font-weight:500;color:#444}.right-stats div[data-v-0a988a38]{line-height:1}.right-stats a[data-v-0a988a38]{font-weight:500}.primary-div[data-v-0a988a38]{color:#555;display:-webkit-box;display:flex;-webkit-box-align:end;align-items:flex-end}.primary-div a[data-v-0a988a38]{font-size:36px;line-height:30px;margin-right:8px}.primary-div span[data-v-0a988a38]{line-height:1}.stats-name[data-v-0a988a38]{text-align:center;margin-bottom:20px}.baidu-stats[data-v-0a988a38]{text-align:center;margin-top:15px}.baidu-stats a[data-v-0a988a38]{font-size:15px}",""]),t.exports=e},1749:function(t,e,n){"use strict";n.r(e);n(83),n(54),n(43),n(131);var o=n(6),c=n(1551),r=n.n(c),m=n(1639),d=n.n(m),v=n(3),l=n.n(v),_=o.default.extend({name:"PageAdminIndex",layout:"admin",components:{VePie:r.a,VeBar:d.a},data:function(){return{settings:this.$store.state.settings,commentsStats:{today:0,yesterday:0,oneweek:0,onemonth:0,total:0},guestbookStats:{today:0,yesterday:0,oneweek:0,onemonth:0,total:0},postsStats:{draft:0,oneweek:0,onemonth:0,totalPosts:0,totalCategories:0},categoriesStats:[],commentsAndGuestbookStats:{commentsStats:{},guestbookStats:{}},extend:{series:{label:{show:!0,position:"top"}}}}},computed:{categoryChartData:function(){var t=[];return this.categoriesStats.forEach((function(e){t.push({"分类":e.cateName,"文章数":e.postsCount})})),{columns:["分类","文章数"],rows:t}},commentsAndGuestbookChartData:function(){var t=[],e=this.commentsAndGuestbookStats.commentsStats;Object.keys(e).forEach((function(n){t.push({"日期":n,"评论数":e[n]})}));var n=this.commentsAndGuestbookStats.guestbookStats;return Object.keys(n).forEach((function(e,o){t[o]["留言数"]=n[e]})),{columns:["日期","评论数","留言数"],rows:t}}},created:function(){var t=this;this.$axios.$get("/api/admin/commentsStats").then((function(e){var code=e.code,data=e.data;1===code&&(t.commentsStats=data)})),this.$axios.$get("/api/admin/guestbookStats").then((function(e){var code=e.code,data=e.data;1===code&&(t.guestbookStats=data)})),this.$axios.$get("/api/admin/postsStats").then((function(e){var code=e.code,data=e.data;1===code&&(t.postsStats=data)})),this.$axios.$get("/api/admin/categoriesStats").then((function(e){var code=e.code,data=e.data;1===code&&(t.categoriesStats=data)})),this.$axios.$get("/api/admin/commentsAndGuestbookStats").then((function(e){var code=e.code,data=e.data;1===code&&(t.commentsAndGuestbookStats=data)}))},mounted:function(){var t=this;this.$bus.$on("changeLayout",(function(){t.$nextTick((function(){t.$refs.chart1&&(t.$refs.chart1.echarts.resize(),t.$refs.chart2.echarts.resize())}))}))},methods:{clickStats:function(t){var e="/admin";switch(t){case"draft":e="/admin/article-manage?isDraft=1&isDeleted=-1";break;case"posts7":e="/admin/article-manage?isDraft=-1&isDeleted=-1&createTime=".concat(l()().subtract(7,"days").format("YYYY-MM-DD"),"&createTime=").concat(l()().format("YYYY-MM-DD"));break;case"posts30":e="/admin/article-manage?isDraft=-1&isDeleted=-1&createTime=".concat(l()().subtract(30,"days").format("YYYY-MM-DD"),"&createTime=").concat(l()().format("YYYY-MM-DD"));break;case"postsAll":e="/admin/article-manage?isDraft=-1&isDeleted=-1";break;case"commentsToday":e="/admin/comment-manage?createTime=".concat(l()().format("YYYY-MM-DD"),"&createTime=").concat(l()().format("YYYY-MM-DD"));break;case"commentsYesterday":e="/admin/comment-manage?createTime=".concat(l()().subtract(1,"days").format("YYYY-MM-DD"),"&createTime=").concat(l()().subtract(1,"days").format("YYYY-MM-DD"));break;case"comments7":e="/admin/comment-manage?createTime=".concat(l()().subtract(7,"days").format("YYYY-MM-DD"),"&createTime=").concat(l()().format("YYYY-MM-DD"));break;case"comments30":e="/admin/comment-manage?createTime=".concat(l()().subtract(30,"days").format("YYYY-MM-DD"),"&createTime=").concat(l()().format("YYYY-MM-DD"));break;case"guestbookToday":e="/admin/guestbook-manage?createTime=".concat(l()().format("YYYY-MM-DD"),"&createTime=").concat(l()().format("YYYY-MM-DD"));break;case"guestbookYesterday":e="/admin/guestbook-manage?createTime=".concat(l()().subtract(1,"days").format("YYYY-MM-DD"),"&createTime=").concat(l()().subtract(1,"days").format("YYYY-MM-DD"));break;case"guestbook7":e="/admin/guestbook-manage?createTime=".concat(l()().subtract(7,"days").format("YYYY-MM-DD"),"&createTime=").concat(l()().format("YYYY-MM-DD"));break;case"guestbook30":e="/admin/guestbook-manage?createTime=".concat(l()().subtract(30,"days").format("YYYY-MM-DD"),"&createTime=").concat(l()().format("YYYY-MM-DD"))}this.$router.push(e)},clickCategory:function(t){this.$router.push("/admin/article-manage?cateName=".concat(t.data.name))},clickCommentsGuest:function(t){this.$router.push("/admin/".concat("留言数"===t.seriesName?"guestbook":"comment","-manage?createTime=").concat(t.name,"&createTime=").concat(t.name))}}}),f=(n(1658),n(22)),component=Object(f.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"admin-index"},[n("div",{staticClass:"page-header"},[t._v("\n    数据统计\n  ")]),t._v(" "),n("div",{staticClass:"stats-body"},[n("a-row",[n("a-col",{attrs:{md:24,lg:8}},[n("div",{staticClass:"stats-panel"},[n("a-row",[n("a-col",{attrs:{xs:24,sm:12}},[n("div",{staticClass:"left-stats"},[n("h3",[t._v("创作中文章")]),t._v(" "),n("div",{staticClass:"primary-div"},[n("a",{on:{click:function(e){return t.clickStats("draft")}}},[t._v(t._s(t.postsStats.draft))]),t._v(" "),n("span",[t._v("篇")])]),t._v(" "),n("div",{staticClass:"btn-new"},[n("nuxt-link",{staticClass:"ant-btn ant-btn-dashed",attrs:{to:"/admin/article-edit"}},[n("font-awesome-icon",{staticStyle:{"margin-right":"4px"},attrs:{icon:["fas","plus"]}}),t._v("新的文章\n                  ")],1)],1)])]),t._v(" "),n("a-col",{attrs:{xs:24,sm:12}},[n("div",{staticClass:"right-stats"},[n("div",[t._v("\n                  7天内发布\n                  "),n("a",{on:{click:function(e){return t.clickStats("posts7")}}},[t._v(t._s(t.postsStats.oneweek))]),t._v(" "),n("span",[t._v("篇")])]),t._v(" "),n("div",[t._v("\n                  30天内发布\n                  "),n("a",{on:{click:function(e){return t.clickStats("posts30")}}},[t._v(t._s(t.postsStats.onemonth))]),t._v(" "),n("span",[t._v("篇")])]),t._v(" "),n("div",[t._v("\n                  总计发布\n                  "),n("a",{on:{click:function(e){return t.clickStats("postsAll")}}},[t._v(t._s(t.postsStats.totalPosts))]),t._v(" "),n("span",[t._v("篇")])]),t._v(" "),n("div",[t._v("\n                  全部分类\n                  "),n("nuxt-link",{attrs:{to:"/admin/category-manage"}},[t._v("\n                    "+t._s(t.postsStats.totalCategories)+"\n                  ")]),t._v(" "),n("span",[t._v("个")])],1)])])],1)],1)]),t._v(" "),n("a-col",{attrs:{md:24,lg:8}},[n("div",{staticClass:"stats-panel"},[n("a-row",[n("a-col",{attrs:{xs:24,sm:12}},[n("div",{staticClass:"left-stats"},[n("h3",[t._v("今日评论")]),t._v(" "),n("div",{staticClass:"primary-div"},[n("a",{on:{click:function(e){return t.clickStats("commentsToday")}}},[t._v(t._s(t.commentsStats.today))]),t._v(" "),n("span",[t._v("条")])])])]),t._v(" "),n("a-col",{attrs:{xs:24,sm:12}},[n("div",{staticClass:"right-stats"},[n("div",[t._v("\n                  昨日评论\n                  "),n("a",{on:{click:function(e){return t.clickStats("commentsYesterday")}}},[t._v(t._s(t.commentsStats.yesterday))]),t._v(" "),n("span",[t._v("条")])]),t._v(" "),n("div",[t._v("\n                  7天内评论\n                  "),n("a",{on:{click:function(e){return t.clickStats("comments7")}}},[t._v(t._s(t.commentsStats.oneweek))]),t._v(" "),n("span",[t._v("条")])]),t._v(" "),n("div",[t._v("\n                  30天内评论\n                  "),n("a",{on:{click:function(e){return t.clickStats("comments30")}}},[t._v(t._s(t.commentsStats.onemonth))]),t._v(" "),n("span",[t._v("条")])]),t._v(" "),n("div",[t._v("\n                  全部评论\n                  "),n("nuxt-link",{attrs:{to:"/admin/comment-manage"}},[t._v("\n                    "+t._s(t.commentsStats.total)+"\n                  ")]),t._v(" "),n("span",[t._v("条")])],1)])])],1)],1)]),t._v(" "),n("a-col",{attrs:{md:24,lg:8}},[n("div",{staticClass:"stats-panel"},[n("a-row",[n("a-col",{attrs:{xs:24,sm:12}},[n("div",{staticClass:"left-stats"},[n("h3",[t._v("今日留言")]),t._v(" "),n("div",{staticClass:"primary-div"},[n("a",{on:{click:function(e){return t.clickStats("guestbookToday")}}},[t._v(t._s(t.guestbookStats.today))]),t._v(" "),n("span",[t._v("条")])])])]),t._v(" "),n("a-col",{attrs:{xs:24,sm:12}},[n("div",{staticClass:"right-stats"},[n("div",[t._v("\n                  昨日留言\n                  "),n("a",{on:{click:function(e){return t.clickStats("guestbookYesterday")}}},[t._v(t._s(t.guestbookStats.yesterday))]),t._v(" "),n("span",[t._v("条")])]),t._v(" "),n("div",[t._v("\n                  7天内留言\n                  "),n("a",{on:{click:function(e){return t.clickStats("guestbook7")}}},[t._v(t._s(t.guestbookStats.oneweek))]),t._v(" "),n("span",[t._v("条")])]),t._v(" "),n("div",[t._v("\n                  30天内留言\n                  "),n("a",{on:{click:function(e){return t.clickStats("guestbook30")}}},[t._v(t._s(t.guestbookStats.onemonth))]),t._v(" "),n("span",[t._v("条")])]),t._v(" "),n("div",[t._v("\n                  全部留言\n                  "),n("nuxt-link",{attrs:{to:"/admin/guestbook-manage"}},[t._v("\n                    "+t._s(t.guestbookStats.total)+"\n                  ")]),t._v(" "),n("span",[t._v("条")])],1)])])],1)],1)])],1),t._v(" "),n("a-row",[n("a-col",{attrs:{md:24,lg:12,xl:8}},[n("div",{staticClass:"stats-panel"},[n("ve-pie",{ref:"chart1",attrs:{data:t.categoryChartData,events:{click:t.clickCategory}}}),t._v(" "),n("div",{staticClass:"stats-name"},[t._v("\n            文章分类数据统计\n          ")])],1)]),t._v(" "),n("a-col",{attrs:{md:24,lg:12,xl:16}},[n("div",{staticClass:"stats-panel"},[n("ve-bar",{ref:"chart2",attrs:{data:t.commentsAndGuestbookChartData,extend:t.extend,events:{click:t.clickCommentsGuest}}}),t._v(" "),n("div",{staticClass:"stats-name"},[t._v("\n            近一周评论与留言数量\n          ")])],1)])],1),t._v(" "),n("div",{staticClass:"baidu-stats"},[t.settings.enableStatistics?n("a-button",{attrs:{type:"primary",shape:"round",href:"https://tongji.baidu.com/web/homepage/index",target:"_blank"}},[n("web-font",{staticStyle:{"margin-right":"4px"},attrs:{icon:"external-link"}}),t._v("前往百度统计官网查看访问数据\n      ")],1):t._e()],1)],1)])}),[],!1,null,"0a988a38",null);e.default=component.exports}}]);